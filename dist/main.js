(()=>{"use strict";null===localStorage.getItem("currentID")&&localStorage.setItem("currentID",0);let e="";function t(e,t){this.title=e,this.description=t,this.tasks=[]}let n="",l=document.getElementById("projectsContainer");function a(e,t,l){n=e;let a=document.getElementById("nameDisplay");a.innerHTML="",a.textContent=t.title;let o=document.createElement("div");o.className="deleteButton",o.id=`btn${e}`,o.addEventListener("click",(()=>function(e){document.querySelector(`[data-id='${e}']`).remove(),document.getElementById("nameDisplay").textContent="Project Name",document.getElementById("taskContainer").innerHTML="",localStorage.removeItem(e)}(e))),a.append(o)}function o(e){document.querySelectorAll(".project").forEach((e=>e.className="project")),e.classList.add("selectedProject")}function r(){let e=JSON.parse(localStorage[n]).tasks,t=document.getElementById("taskContainer");t.textContent="";for(let n=0;n<e.length;n++){let l=document.createElement("div");l.className="task";let a=document.createElement("h1");a.textContent=e[n].title;let o=document.createElement("p");o.textContent=e[n].description,l.append(a),a.append(o),t.append(l),"low"==e[n].priority?l.style.backgroundColor="rgba(12, 236, 4, 0.75)":"medium"==e[n].priority?l.style.backgroundColor="rgba(255, 251, 1, 0.75)":"high"==e[n].priority&&(l.style.backgroundColor="rgba(255, 1, 1, 0.75)");let r=document.createElement("div");r.className="taskDue",r.textContent="Due: "+e[n].dueDate,l.append(r)}}function s(e,t,n,l){this.title=e,this.description=t,this.dueDate=n,this.priority=l}let c=document.getElementById("projectForm"),i=document.getElementById("titleInput");c.addEventListener("submit",(()=>{(function(n){n.preventDefault();let l=new t(titleInput.value,descInput.value),a=JSON.stringify(l),o=localStorage.getItem("currentID");e=o,localStorage.setItem(o,a),o++,localStorage.setItem("currentID",o),projectsFormContainer.style.display="",titleInput.value="",descInput.value=""})(event),function(){let t=document.createElement("div"),n=parseInt(localStorage.getItem("currentID"))-1,s=JSON.parse(localStorage.getItem(e));t.textContent=s.title,t.className="project",t.setAttribute("data-id",n),t.addEventListener("click",(()=>{a(n,s),r(),o(t)})),l.append(t)}(i.textContent)}));const d=document.getElementById("projectBtn"),u=document.getElementById("projectsFormContainer");d.addEventListener("click",(()=>{""==u.style.display?u.style.display="flex":"flex"==u.style.display&&(u.style.display="")})),document.getElementById("tasksForm").addEventListener("submit",(()=>{(function(e){e.preventDefault();let t=JSON.parse(localStorage.getItem(n));if(void 0!==t){let e=new s(taskTitleInput.value,taskDescInput.value,dueDateInput.value,priorityInput.value);t.tasks.push(e);let l=JSON.stringify(t);localStorage.setItem(n,l),tasksFormContainer.style.display="",taskTitleInput.value="",taskDescInput.value="",dueDateInput.value="",priorityInput.option=""}else alert("Select a project to add your task to.")})(event),r()}));const m=document.getElementById("taskBtn"),p=document.getElementById("tasksFormContainer");m.addEventListener("click",(()=>{""==p.style.display?p.style.display="flex":"flex"==p.style.display&&(p.style.display="")})),Object.keys(localStorage).forEach((e=>{if("currentID"!=e){let t=document.createElement("div"),n=e,s=JSON.parse(localStorage[e]);t.textContent=s.title,t.className="project",t.setAttribute("data-id",n),t.addEventListener("click",(()=>{a(n,s),r(),o(t)})),l.append(t)}}))})();