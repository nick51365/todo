(()=>{"use strict";null===localStorage.getItem("currentID")&&localStorage.setItem("currentID",0);let e="";function t(e,t){this.title=e,this.description=t,this.tasks=[]}let n="",l=document.getElementById("projectsContainer");function a(e,t){n=e;let l=document.getElementById("nameDisplay");l.innerHTML="",l.textContent=t.title;let a=document.createElement("div");a.className="deleteButton",a.id=`btn${e}`,a.addEventListener("click",(()=>function(e){document.querySelector(`[data-id='${e}']`).remove(),document.getElementById("nameDisplay").textContent="Project Name",document.getElementById("taskContainer").innerHTML="",localStorage.removeItem(e)}(e))),l.append(a)}function o(e){document.querySelectorAll(".project").forEach((e=>e.className="project")),e.classList.add("selectedProject")}function r(){let e=JSON.parse(localStorage[n]),t=e.tasks,l=document.getElementById("taskContainer");l.textContent="";for(let a=0;a<t.length;a++){let o=document.createElement("div");o.className="task";let r=document.createElement("h1");r.textContent=t[a].title,o.append(r);let c=document.createElement("p");c.textContent=t[a].description,r.append(c);let i=document.createElement("div");i.className="taskDue",i.textContent="Due: "+t[a].dueDate,o.append(i);let d=document.createElement("div");t[a],d.className="taskDeleteBtn",d.addEventListener("click",(()=>s(t,a,e,n))),o.append(d),l.append(o),"low"==t[a].priority?o.style.backgroundColor="rgba(12, 236, 4, 0.75)":"medium"==t[a].priority?o.style.backgroundColor="rgba(255, 251, 1, 0.75)":"high"==t[a].priority&&(o.style.backgroundColor="rgba(255, 1, 1, 0.75)")}}function s(e,t,n,l){e.splice(t,1),n.tasks=e,localStorage[l]=JSON.stringify(n),r()}function c(e,t,n,l){this.title=e,this.description=t,this.dueDate=n,this.priority=l}let i=document.getElementById("projectForm"),d=document.getElementById("titleInput");i.addEventListener("submit",(()=>{(function(n){n.preventDefault();let l=new t(titleInput.value,descInput.value),a=JSON.stringify(l),o=localStorage.getItem("currentID");e=o,localStorage.setItem(o,a),o++,localStorage.setItem("currentID",o),projectsFormContainer.style.display="",titleInput.value="",descInput.value=""})(event),function(){let t=document.createElement("div"),n=parseInt(localStorage.getItem("currentID"))-1,s=JSON.parse(localStorage.getItem(e));t.textContent=s.title,t.className="project",t.setAttribute("data-id",n),t.addEventListener("click",(()=>{a(n,s),r(),o(t)})),l.append(t)}(d.textContent)}));const u=document.getElementById("projectBtn"),m=document.getElementById("projectsFormContainer");u.addEventListener("click",(()=>{""==m.style.display?m.style.display="flex":"flex"==m.style.display&&(m.style.display="")})),document.getElementById("tasksForm").addEventListener("submit",(()=>{(function(e){e.preventDefault();let t=JSON.parse(localStorage.getItem(n));if(void 0!==t){let e=new c(taskTitleInput.value,taskDescInput.value,dueDateInput.value,priorityInput.value);t.tasks.push(e);let l=JSON.stringify(t);localStorage.setItem(n,l),tasksFormContainer.style.display="",taskTitleInput.value="",taskDescInput.value="",dueDateInput.value="",priorityInput.option=""}else alert("Select a project to add your task to.")})(event),r()}));const p=document.getElementById("taskBtn"),y=document.getElementById("tasksFormContainer");p.addEventListener("click",(()=>{""==y.style.display?y.style.display="flex":"flex"==y.style.display&&(y.style.display="")})),Object.keys(localStorage).forEach((e=>{if("currentID"!=e){let t=document.createElement("div"),n=e,s=JSON.parse(localStorage[e]);t.textContent=s.title,t.className="project",t.setAttribute("data-id",n),t.addEventListener("click",(()=>{a(n,s),r(),o(t)})),l.append(t)}}))})();