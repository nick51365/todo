(()=>{"use strict";null===localStorage.getItem("currentID")&&localStorage.setItem("currentID",0);let e="";function t(e,t){this.title=e,this.description=t,this.tasks=[]}let n="",l=document.getElementById("projectsContainer");function a(e,t){n=e;let l=document.getElementById("nameDisplay");l.innerHTML="",l.textContent=t.title;let a=document.createElement("div");a.className="deleteButton",a.id=`btn${e}`,a.addEventListener("click",(()=>function(e){document.querySelector(`[data-id='${e}']`).remove(),document.getElementById("nameDisplay").textContent="Project Name",document.getElementById("taskContainer").innerHTML="",localStorage.removeItem(e)}(e))),l.append(a)}function o(){let e=JSON.parse(localStorage[n]).tasks,t=document.getElementById("taskContainer");t.textContent="";for(let n=0;n<e.length;n++){let l=document.createElement("div");l.className="task";let a=document.createElement("h1");a.textContent=e[n].title;let o=document.createElement("p");o.textContent=e[n].description,l.append(a),a.append(o),t.append(l),"low"==e[n].priority?l.style.backgroundColor="rgba(12, 236, 4, 0.75)":"medium"==e[n].priority?l.style.backgroundColor="rgba(255, 251, 1, 0.75)":"high"==e[n].priority&&(l.style.backgroundColor="rgba(255, 1, 1, 0.75)");let r=document.createElement("div");r.className="taskDue",r.textContent="Due: "+e[n].dueDate,l.append(r)}}function r(e,t,n,l){this.title=e,this.description=t,this.dueDate=n,this.priority=l}let s=document.getElementById("projectForm"),i=document.getElementById("titleInput");s.addEventListener("submit",(()=>{(function(n){n.preventDefault();let l=new t(titleInput.value,descInput.value),a=JSON.stringify(l),o=localStorage.getItem("currentID");e=o,localStorage.setItem(o,a),o++,localStorage.setItem("currentID",o),projectsFormContainer.style.display="",titleInput.value="",descInput.value=""})(event),function(){let t=document.createElement("div"),n=parseInt(localStorage.getItem("currentID"))-1,r=JSON.parse(localStorage.getItem(e));t.textContent=r.title,t.className="project",t.setAttribute("data-id",n),t.addEventListener("click",(()=>{a(n,r),o()})),l.append(t)}(i.textContent)}));const c=document.getElementById("projectBtn"),d=document.getElementById("projectsFormContainer");c.addEventListener("click",(()=>{""==d.style.display?d.style.display="flex":"flex"==d.style.display&&(d.style.display="")})),document.getElementById("tasksForm").addEventListener("submit",(()=>{(function(e){e.preventDefault();let t=JSON.parse(localStorage.getItem(n));if(void 0!==t){let e=new r(taskTitleInput.value,taskDescInput.value,dueDateInput.value,priorityInput.value);t.tasks.push(e);let l=JSON.stringify(t);localStorage.setItem(n,l),tasksFormContainer.style.display="",taskTitleInput.value="",taskDescInput.value="",dueDateInput.value="",priorityInput.option=""}else alert("Select a project to add your task to.")})(event),o()}));const u=document.getElementById("taskBtn"),m=document.getElementById("tasksFormContainer");u.addEventListener("click",(()=>{""==m.style.display?m.style.display="flex":"flex"==m.style.display&&(m.style.display="")})),console.log(Object.keys(localStorage)),Object.keys(localStorage).forEach((e=>{if("currentID"!=e){let t=document.createElement("div"),n=localStorage.getItem("currentID")-1,r=JSON.parse(localStorage[e]);t.textContent=r.title,t.className="project",t.setAttribute("data-id",n),t.addEventListener("click",(()=>{a(n,r),o()})),l.append(t)}}))})();