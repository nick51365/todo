(()=>{"use strict";null===localStorage.getItem("currentID")&&localStorage.setItem("currentID",0);let e="";function t(e,t){this.title=e,this.description=t,this.tasks=[]}let n=0,l=document.getElementById("projectsContainer");function a(e,t){n=e;let l=document.getElementById("nameDisplay");l.innerHTML="",l.textContent=t.title;let a=document.createElement("h2");a.textContent=t.description,l.append(a);let o=document.createElement("div");o.className="deleteButton",o.id=`btn${e}`,o.addEventListener("click",(()=>function(e){!0===confirm("Delete this project?")&&(document.querySelector(`[data-id='${e}']`).remove(),document.getElementById("nameDisplay").textContent="Project Name",document.getElementById("taskContainer").innerHTML="",localStorage.removeItem(e))}(e))),l.append(o)}function o(e){document.querySelectorAll(".project").forEach((e=>e.className="project")),e.classList.add("selectedProject")}function r(){let e=JSON.parse(localStorage[n]),t=e.tasks,l=document.getElementById("taskContainer");l.textContent="";for(let a=0;a<t.length;a++){let o=document.createElement("div");o.className="task";let r=document.createElement("h1");r.textContent=t[a].title,o.append(r);let s=document.createElement("p");s.textContent=t[a].description,r.append(s);let i=document.createElement("div");i.className="taskDue",i.textContent="Due: "+t[a].dueDate,o.append(i);let d=document.createElement("div");t[a],d.className="taskDeleteBtn",d.addEventListener("click",(()=>c(t,a,e,n))),o.append(d),l.append(o),"low"==t[a].priority?o.style.backgroundColor="rgba(12, 236, 4, 0.75)":"medium"==t[a].priority?o.style.backgroundColor="rgba(255, 251, 1, 0.75)":"high"==t[a].priority&&(o.style.backgroundColor="rgba(255, 1, 1, 0.75)")}}function c(e,t,n,l){!0===confirm("Delete this task?")&&(e.splice(t,1),n.tasks=e,localStorage[l]=JSON.stringify(n),r())}function s(e,t,n,l){this.title=e,this.description=t,this.dueDate=n,this.priority=l}let i=document.getElementById("projectForm");document.getElementById("titleInput"),i.addEventListener("submit",(()=>{(function(n){n.preventDefault();let l=new t(titleInput.value,descInput.value),a=JSON.stringify(l),o=localStorage.getItem("currentID");e=o,localStorage.setItem(o,a),o++,localStorage.setItem("currentID",o),projectsFormContainer.style.display="",titleInput.value="",descInput.value=""})(event),function(){let t=document.createElement("div"),n=parseInt(localStorage.getItem("currentID"))-1,c=JSON.parse(localStorage.getItem(e));t.textContent=c.title,t.className="project",t.setAttribute("data-id",n),t.addEventListener("click",(()=>{a(n,c),r(),o(t)})),l.append(t)}()}));const d=document.getElementById("projectBtn"),u=document.getElementById("projectsFormContainer");d.addEventListener("click",(()=>{""==u.style.display?u.style.display="flex":"flex"==u.style.display&&(u.style.display="")})),document.getElementById("tasksForm").addEventListener("submit",(()=>{(function(e){e.preventDefault();let t=JSON.parse(localStorage.getItem(n));if(void 0!==t){let e=new s(taskTitleInput.value,taskDescInput.value,dueDateInput.value,priorityInput.value);t.tasks.push(e);let l=JSON.stringify(t);localStorage.setItem(n,l),tasksFormContainer.style.display="",taskTitleInput.value="",taskDescInput.value="",dueDateInput.value="",priorityInput.option=""}else alert("Select a project to add your task to.")})(event),r()}));const m=document.getElementById("taskBtn"),p=document.getElementById("tasksFormContainer");m.addEventListener("click",(()=>{""==p.style.display?p.style.display="flex":"flex"==p.style.display&&(p.style.display="")})),function(){if("0"==localStorage.getItem("currentID")){let n=new t("Misc. Tasks",""),l=JSON.stringify(n),a=localStorage.getItem("currentID");e=a,localStorage.setItem(a,l),a++,localStorage.setItem("currentID",a)}}(),Object.keys(localStorage).forEach((e=>{if("currentID"!=e){let t=document.createElement("div"),n=e,c=JSON.parse(localStorage[e]);t.textContent=c.title,t.className="project",t.setAttribute("data-id",n),t.addEventListener("click",(()=>{a(n,c),r(),o(t)})),l.append(t)}})),document.querySelector(".project").classList.add("selectedProject")})();